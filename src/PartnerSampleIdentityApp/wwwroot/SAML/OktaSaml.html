<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>SAML Auth - Redirect</title>
    <link rel="stylesheet" href="/css/Styles.css" />
    <script type="text/javascript">
        // Update these for your SAML configuration
        let initDomain = "alaskaqa.us.auth0.com";
        let initClientId = "Z44PoNZwqGlkByWjEZA5wXfYa1yiAZOZ";
        let initActionUrl = `https://${initDomain}/samlp/${initClientId}`;
        let initRedirectUri = window.location.href;

        window.onload = () => {
            document.getElementById("samlDomain").setAttribute("value", initDomain);
            document.getElementById("samlClientId").setAttribute("value", initClientId);
            document.getElementById("samlRedirectUrl").setAttribute("value", initRedirectUri);
            document.getElementById("samlActionUrl").setAttribute("value", initActionUrl);
            `${actionUrl}${clientId}`
        };

        const login = () => {
            let actionUrl = document.getElementById("samlActionUrl").value;
            let domain = document.getElementById("samlDomain").value;
            let clientId = document.getElementById("samlClientId").value;
            let redirectUri = document.getElementById("samlRedirectUrl").value;
            let relayState = document.getElementById("samlRelayState").value;

            let fullActionUrl = `${actionUrl}${clientId}`;
            let form = document.createElement('form');
            form.method = 'POST';
            form.action = fullActionUrl;

            let relayStateInput = document.createElement('input');
            relayStateInput.type = 'hidden';
            relayStateInput.name = 'RelayState';
            relayStateInput.value = relayState;
            form.appendChild(relayStateInput);

            document.body.appendChild(form);
            form.submit();
        };

        const logout = () => {
            // Implement logout functionality if needed
            alert('Logout functionality not implemented');
        };

        const updateUI = () => {
            // This function would be called after successful authentication
            // For now, we'll just update the content with a message
            const userData = document.getElementById('content-saml');
            userData.textContent = 'SAML authentication completed. Actual user details would be displayed here.';
        };
    </script>
</head>
<body>
    <h1>Alaska Airlines</h1>
    <h2>Partner Authentication Example - SAML</h2>
    <hr />
    <div>
        <pre id="content-saml" align="left">User Details will populate here after login</pre>
    </div>
    <hr />
    <div id="uxActiveOptions">
        <form id="samlConfigForm">
            <label for="samlDomain">Enter SAML domain:</label>
            <input type="text"
                   id="samlDomain"
                   name="samlDomain"
                   required=""
                   value=""
                   size="50" />
            <br />
            <label for="samlClientId">Enter SAML client ID:</label>
            <input type="text"
                   id="samlClientId"
                   name="samlClientId"
                   required=""
                   value=""
                   size="32" />
            <br />
            <label for="samlActionUrl">Enter SAML action URL:</label>
            <input type="text"
                   id="samlActionUrl"
                   name="samlActionUrl"
                   required=""
                   value=""
                   size="50" />
            <br />
            <label for="samlRedirectUrl">Enter SAML redirect URL:</label>
            <input type="text"
                   id="samlRedirectUrl"
                   name="samlRedirectUrl"
                   required=""
                   value=""
                   size="50" />
            <br />
            <label for="samlRelayState">Enter Relay State:</label>
            <input type="text"
                   id="samlRelayState"
                   name="samlRelayState"
                   placeholder="Relay State. Make it a url and you will be redirected to the url."
                   size="50" />
            <br />

            <b>Functions:</b>
            <p><button type="button" onclick="login();">Login with SAML</button></p>
            <p><button type="button" onclick="logout();">Logout</button></p>
        </form>
    </div>
</body>
</html>